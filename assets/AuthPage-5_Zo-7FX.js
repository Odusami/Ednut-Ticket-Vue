import{_ as v,c as d,a as r,t,f as y,g as m,h as c,v as f,n as u,e as P,i as g,j as p,u as _,k,o as n}from"./index-Cj8QT0-n.js";const D={name:"AuthPage",setup(){const i=g(!0),s=p({name:"",email:"",password:"",confirmPassword:""}),o=p({}),a=g(!1),{login:w,signup:h}=_(),e=k(),b=()=>(Object.keys(o).forEach(l=>delete o[l]),!i.value&&!s.name.trim()&&(o.name="Name is required"),s.email?/\S+@\S+\.\S+/.test(s.email)||(o.email="Email is invalid"):o.email="Email is required",s.password?s.password.length<6&&(o.password="Password must be at least 6 characters"):o.password="Password is required",i.value||(s.confirmPassword?s.password!==s.confirmPassword&&(o.confirmPassword="Passwords do not match"):o.confirmPassword="Please confirm your password"),Object.keys(o).length===0);return{isLogin:i,formData:s,errors:o,loading:a,handleSubmit:async()=>{if(b()){a.value=!0;try{i.value?await w(s.email,s.password):await h(s.email,s.password,s.name),e.push("/dashboard")}catch{}finally{a.value=!1}}},switchMode:()=>{i.value=!i.value,Object.keys(o).forEach(l=>delete o[l]),Object.keys(s).forEach(l=>{s[l]=""})}}}},S={class:"auth-page","data-testid":"auth-page"},L={class:"container"},A={class:"auth-card"},E={class:"auth-title","data-testid":"auth-title"},V={key:0,class:"form-group"},x={key:0,class:"error-message","data-testid":"name-error"},M={class:"form-group"},j={key:0,class:"error-message","data-testid":"email-error"},C={class:"form-group"},N={key:0,class:"error-message","data-testid":"password-error"},U={key:1,class:"form-group"},O={key:0,class:"error-message","data-testid":"confirm-password-error"},q=["disabled"],B={class:"auth-switch"};function F(i,s,o,a,w,h){return n(),d("div",S,[r("div",L,[r("div",A,[r("h1",E,t(a.isLogin?"Login to Your Account":"Create Your Account"),1),r("form",{onSubmit:s[4]||(s[4]=y((...e)=>a.handleSubmit&&a.handleSubmit(...e),["prevent"])),class:"auth-form","data-testid":"auth-form"},[a.isLogin?m("",!0):(n(),d("div",V,[s[6]||(s[6]=r("label",{for:"name"},"Full Name",-1)),c(r("input",{type:"text",id:"name","onUpdate:modelValue":s[0]||(s[0]=e=>a.formData.name=e),class:u({error:a.errors.name}),"data-testid":"name-input"},null,2),[[f,a.formData.name]]),a.errors.name?(n(),d("div",x,t(a.errors.name),1)):m("",!0)])),r("div",M,[s[7]||(s[7]=r("label",{for:"email"},"Email Address",-1)),c(r("input",{type:"email",id:"email","onUpdate:modelValue":s[1]||(s[1]=e=>a.formData.email=e),class:u({error:a.errors.email}),"data-testid":"email-input"},null,2),[[f,a.formData.email]]),a.errors.email?(n(),d("div",j,t(a.errors.email),1)):m("",!0)]),r("div",C,[s[8]||(s[8]=r("label",{for:"password"},"Password",-1)),c(r("input",{type:"password",id:"password","onUpdate:modelValue":s[2]||(s[2]=e=>a.formData.password=e),class:u({error:a.errors.password}),"data-testid":"password-input"},null,2),[[f,a.formData.password]]),a.errors.password?(n(),d("div",N,t(a.errors.password),1)):m("",!0)]),a.isLogin?m("",!0):(n(),d("div",U,[s[9]||(s[9]=r("label",{for:"confirmPassword"},"Confirm Password",-1)),c(r("input",{type:"password",id:"confirmPassword","onUpdate:modelValue":s[3]||(s[3]=e=>a.formData.confirmPassword=e),class:u({error:a.errors.confirmPassword}),"data-testid":"confirm-password-input"},null,2),[[f,a.formData.confirmPassword]]),a.errors.confirmPassword?(n(),d("div",O,t(a.errors.confirmPassword),1)):m("",!0)])),r("button",{type:"submit",class:"btn btn--primary btn--full-width",disabled:a.loading,"data-testid":"auth-submit-btn"},t(a.loading?"Please wait...":a.isLogin?"Login":"Sign Up"),9,q)],32),r("p",B,[P(t(a.isLogin?"Don't have an account?":"Already have an account?")+" ",1),r("button",{type:"button",onClick:s[5]||(s[5]=(...e)=>a.switchMode&&a.switchMode(...e)),class:"link-button","data-testid":"auth-switch-btn"},t(a.isLogin?"Sign up here":"Login here"),1)])])])])}const R=v(D,[["render",F]]);export{R as default};
